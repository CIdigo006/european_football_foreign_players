import{b3 as b,d as v,T as g,B as k,a1 as I,I as B,am as D,h as N,k as S,u as e,c as T,l as m,a as x,o as F,q as p,b4 as J,b5 as O,b6 as z,b7 as P,ai as d,b1 as i}from"./index-7ce61d56.js";import{u as U}from"./usePageTitle-173ab940.js";class V extends b{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const M=v({__name:"FlowRunCreate",setup(y){const t=g(),n=k("deploymentId"),s=I(),f=B("parameters",V,void 0),{deployment:o}=D(n),_=async r=>{var l,a;try{const u=await t.deployments.createDeploymentFlowRun(n.value,r),c=((a=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:a.scheduledTime)??void 0,C=!c,h=z(P,{flowRun:u,flowRunRoute:d.flowRun,router:s,immediate:C,startTime:c});i(h,"success"),s.push(d.deployment(n.value))}catch(u){i("Something went wrong trying to create a flow run","error"),console.error(u)}},w=()=>{s.back()},R=N(()=>o.value?`Create Flow Run for Deployment: ${o.value.name}`:"Create Flow Run for Deployment");return U(R),(r,l)=>{const a=S("p-layout-default");return e(o)?(F(),T(a,{key:0},{header:m(()=>[p(e(J),{deployment:e(o)},null,8,["deployment"])]),default:m(()=>[p(e(O),{deployment:e(o),parameters:e(f),onSubmit:_,onCancel:w},null,8,["deployment","parameters"])]),_:1})):x("",!0)}}});export{M as default};
